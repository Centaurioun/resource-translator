import { TranslationResults, TranslationResultSet } from "./translation-results";
import { zip } from "./utils";

// Debug here:
// https://www.typescriptlang.org/play?#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-mAsHa2jtUbaHQp5d-JNf8rqptusK2pYC2odUaR9PAjoADPIAO1wC7Zi-hABBcUhAOR8DtIAbEBIA7s5e-eNB6ypHouimpFNTUVqwaScqshAG0UBAAgawnqACiIBHVwGdRDUwENPVgGhsgAAaoQaEoksBwGWPyL94ay6duOfwgAUvah5uZV0OD+k6l1SZEAUA5BAGGVZxRIFbbOCSf7YgAYY5RIkQsY0FPFvur+4GmH8pPdB89sHM3XoQwpOCKo4QNpgMob8cBlRQDkLEOQ2GQDADhNh8UcBjDVscwgcU+I5DwCgJ5jtchX2QNI8JJDrbsMEGRq6EAYNqIxbXPcmUOBkIQyExDbIUAYsUPJMB4pYGZYad5VB9hICM1iv0-wg8NI+qLBswFoLN6IA-rtNAeIT77GURy9Qg6qn4UQZYVpkrIrL3ooq5RGgFAGDzDgCgHjuGXV2aFN9LUMo+r3M88AGGJAbOLYc3sDUwBLNLbkIsQgsQ5M5RJA1k5B5mUXEwIWqAywOTxAhnNvD7IXXfiEDDUj9z1zI3XPEOIaMOs5S67kpTyBCkgcln1wrybBtptK1w8r3aBJIxwCJcLxbQAoAAGIzBQzJfqwB0tQAAD8AH3qLIBoKDaU0Bdx3P82Doq13+GACzgQAjcCAG7gQAc8CACHgZAgA64EAIPAgAO4G54AEeBACtwMgQAY8CAHrgXngB+4EAJ3AyBAA9wKrwAo8D3EAMPA3PheAC7gPngBJ4AN6rsXSvABtwHrrX8vHfIEAOPA3OxeABrgChNJcu9dhf1ypgqz3ptR1e7t3VerICEtQbLTFmOUUAMnAsv1fc+QFb3XyATeABngA3jvvc4F99ytTBXf6QaR8HlHoqw9vsEgzlEywtSKXey6mAFOIb0+E1Hsn-UKPQmwzCRGWBkIgAu+z+POVAAFwEL5AgAW4D17z2XgBZ4GT8gVXyBAA5wIAAeBece-t2L5AgBm4BT2nwAtcCAF7gbnGhkCAAzgE-avdfO4v9rj3EuHey9Hz77reTY2w-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-difA4Q6AwA3EawwgwA9o4APyQgA8JAIOIPkPwO-3IC-34PINEMwxkPICAA4kIg5w5w8g4AFiQiD+DeDyARDcD5qWSWEMoimXdVRJhetfN-dTpNjzR-C44hAgAfoABpjpXIXJnY3Is4qSgogyiSPLPI0g7MiiLpfI-KIQbpMrAqgrv3lXdp-RyBUV7YeogCugujfTYZwiJmyUqQWjgAPZYH3Ofg9mpNlFCPjMWP61jUD1G22M5QMqAosrrhCbEEWpDM3PjnuUgCeVbPOVHXEnAvmMiMQtiPWPyGzOUR2oOpxGLruqerfJYB+oBpBohphqpNouRFPIPb23GAdiAqemZWAu5XKQSSOU-MxaAUosKgjPWk917mWOOnWGksIkAA7sQdoqRu4qRryFOv06ZUAs6hJ5YKZFGVywo2GFOqr6rmrHI2ryAAAa+AO-R3ZozlHQP+fgHEPgN6ZAABWlRAABTWl6YaI2W1qa3wJ2QGS5gQMWiAF6UsF1e+scHiyi6qAS7K0S1Y1CzMwiZKD1PehhTgNOtpKk06+HlCH1C7Q5km4Mym8FYReC5M5C9M4q+HoQEIOJPMIAI6A0gqR34v0KFaAdae24FUAHIy4o+4oJb6LWQBrmAHhvGEMywsgI7nqKGxGv0Cb5IMMdqLzwgoAHY+RFAo+NbA1lRQ1oVI16b8rdJ5FjSIWWOSGe7ea3e8wg6DmCWAAD+yKkUIHMKJAAH-joQy+1IwQDCgUIahuUPOTb4mgz3Llpob3Drg1rYEEC4H4Es5+ttr+XJsgviFguEsNvEuZvNvjkR55uSiBqrjgcRGNI2X2hSi+Wzls5aipthWXvAFRVC03otaZaaQYVQA1lvbzvsi1jd5-uaS-bACfsA6juiQcGep-twDvtHs0eVUSb8BzvzaEa4t3YogoAEZeq-att3JofUYEa9RHsgvf6DUhUmV2l92NsKvwndqACDnoAHYMgA08qABdcoAEkMgAytaABz8YAOoMgAgAwueAD6DIAIYMgA9gyAA5qoAMkMgA5gyABCDIAFYM4XPnAXgAEgyAB+DIAJoMFCuo85dcu8Q8jcgA0iCjxtzlfICADZIIAI0gk8k85XtXk8Q8hCo85XZ89w9cgAaiBnzIDbz9dty9fID1xDy1fldNc1e1dlfbw1dDxBKddnwUL6iscXuEcZtNvOfjmADzDIALcMgAPwyAD3DId4ANcMgAkwyACA-2zkV9iYAIQggAmyDdzpLNyTwnytzPfpKrfSDremXscjmceSMnKABrDIADcMgAJQyABtDNF4AJYMbngAEQyABiDIANYMaX4Xbn4XgAgQwo+ACzCoACIMgAZgz4-5eADSDFDBFzF4AKfugAUQzhf4+Jd5eABADLd1Ld2vd-18gIAPUgncvXA8yAgSwSoSdXi37XyAgAbCD1edfbzIC9e7xEIjcwz+Kc99fdyADMIL16PJz+4s3C9yN6Pmt53dK8I2m5t1e0edFScpAcgPsENNKFYM5hAN8jgANNhtFtSKJGGeaANDAPsN9IAPqAAAdyjPEXgHaHEIhRLWzkaGy40oABUwcfgAszBx-ICAAdMMn4AOMwgAnTCAD9MIACUwgADTBJ9x+ACDMGn4n4AK0wgAfTCADpMHnzn6nyX-cHH1XxX2X3Hzn4AHUwNfgAYzBp+ABBMHn4ANMwgA7TDV8185-l-j-1+N95+J958Z8V89+rdHKQq2c80B7QlEfbdjmQIkCED+-pn+8R8xtVsRox-zlZ+ABNMEP8gIAFUwifBfd--fgAWTAr9-f2dysccSMwtYRxEgxGsvUyAJtHAD9Cepvw+wb1I3lQqiQIBYA3cHuzDJPNgAqZA3saHnKAAamET5X8M+gAHJgC+ifZAB327619J+WfDPr32QCABUmB75X9U+yATvlX0ACFMCXzn719AAZTA98YYLfNvsgHr6ABmmBz7sCS+VAwAFMw-AxPvwIwEZ8qBJfA3qv2jSjMz2dnXmojimZOdd+jSQAC0NyAQADpzgAG1rAAPp3IBAAGmuABAMcACWq4AAmmwACdN9wQAA1jgAGs7AAKU3IBAAkauABXnsAAaq4ABia5AIAE+mwAAdDgAEXHkAgAPc7AALuOrd9I2JWyIAFWwAYoADmwSyLZESFhRWiHkQKIAFSwRIVMT6JzE4hCxQAGNgSxDyIAFawKYlMTiGBRChCUMoZkN6JhRVoiQjonEP2JxCpi5kVbh3TX51sCOagxzte0t78JAAIBPIBAAHIOAARmuQCAAb0cAA37YABDe5AIAAlRwAKqNXg8YYABSx6IfOTqGZD6YhQrklMQyFdDo+PQ0FhSVN4DDt+Ggm9ickAAofYAAgOiIYAAAJ1wfMIWGhDAAIOOAAXVeQCAAW0cADdrX4MAA+414MAAHNcgEAAR44AFahqwYABk6mGE4NcGAAZUchGAA3of+GbCDeMQ51lhEZJxCqYRQ1kkULCgik6YtkIocgG6JUiXIbQwUizDpGbFzI1QxIUKVshUw+inQs4VKxs59CrhgBQYRby44nIaALWSPoWjAB2g5A0gQAJiAyAQAPSAehc8oygoAZBvQMIfij+UJI+kWw8FDSOAHuSjssAFCagPOWjxTAJMAFe5KqKEBuhAAyIAOAtRgAakA7Rv6eCtpR1CABrQBNFs57QH-VQYKJuFDCRR-CPUYhUcSxhoyVAYAKaNEJ4jwxNZKMdRioDYdBm-o2tjKzY5m9v+g9X-namADcs4i34J7J6lk70tkAuRBwGWUEASYFmoASMMAFHxmjsygAQEAEqEMJQK2NiDtiOQPolSOuHoCticijo+SCgJBTBpQArYsAM2LtC8jT26-CZtcK263DhhlEEgISSMxk4IAfUOMvamnKHYMALmdMoWlDQzA+oIKLMMAHgAmcSywAD1C5jkAUInQ85Bckdmmytk4OQhaUDcSDbwEZQVteYNOKOz5lPUFoNMRGldABjN+JFcRnmLJY5Q3SoaL9LOx7DEAuAvUZ8UIHnI5lPU0wT1GwULR9Q-Q4oVsXMCbHPjBGeHS4dmOXHm8gev-T9DcRLLnkYASGE8XEVdDRkfxp4uAIQBhgUE+QLmFzPAF+aVAVQWACMaPhfHYkqsDye0UkSAHTYAJmnD7PMEACygCRlAoyh8imFWdh2GAnfN7kY6DSatmkmCNrOC4-kbRKDEriQxwPfhIAA5YQAIKwgATlhAAwrCAASWEACysJ5OcmABUWG8n+TAAzLCAAxWGQCOTvJgAVlhAAfLCAB0WE8mAAgWHuCAA8WEACYsN5LSmAA-WAimAAKWF8mABpWEADssD5M8kFTAA+LDhTcpgAflgMpaUsKRFOinxSkpyAQAFiwoUwAPSw3kjqc5Pym5TnJz4rMniM-qINAAuJDgNAA9JDINP6BTSBuA1-qIMYG7TABmg0wbYMKmiDe4Ew0-rgN8GDDSBlQx2k1NtGyDJhpwxgaAMWmADQAKCQgAWkgCm6DQBpwxwbQNnxwlXoVmI250Tcx0LBCVhFcmAAmWAKnIAopgAcVhgp3kwALAEgAQlhvJg0+cqgwKY0NwG6DE6Vwx4bgM+Gb06CfaS352ThRDkyiIABpYbyQDJimOTAADLDeTkANU3KYFMCkgzQZgAYlhvJ5U6qcgEABwsHVNymdSYpLM5AIABxYAqQDPZntSupPUvqT5Jhi5TAAdLABSgp1MwAKCwgARlhqpHUpmYlOklDTu0gAGkhDGY04BpUwOnjSppoDRBoAAJIBhvA1AZwMkG5TXBsAwmkwxtpu0xBmjOaaABiSEABCkM9MAAYkJNMQYTT2mcDJhvg2-rST3pig43vhwFF1EhRDEv6a6xDoMA-S3pGsmAJAB8h05fzGMkGxebZAlgZOFQtRFjYrkGAmAckM+NU78IlyOAKMEIEADkgCpDuQ9Q+QDcsMt6mNKgcG5soOAA3JLJCENgho0skjEbk0ZlwSGZ8bh2UEb9cZsEkljt2FrVY4gKGQ7FXLcrEBAAhIAqRvwmLM-mXB9A4yHOwYgmb-wBjCgGyyFYTou2gC6glw4AZcKeM3bIAcyh1UNL9E7ATtpJ1c8lteJ1B9z60HYoUA3PdLSAYYAASSgCCAXapZQeSpFDQuFpJVnfCmMxolfTbJ9En-n9NQD7BNxs4BwEIXD5TBw+xgL9N+mQByA-QzoUwIsGDSEAWUh2WhUIBmCKQLQHIZ8QGHnJ3tsctOaLLFn4LQBEOiWJGClhBzJkhAaWLLGzmDBHyv+gPLBQiQXKJlaFzqPMNgVoWGi4AP6SAIsA4V+h5yLmKcnBVWrtYUWMizMSbxslxyT5CchEnEUyD29BMR1P0KJAwDfNv0MMccJ3NwUkLLMiwaSZwtkl3ZyQ2GFwioEoJCctOn2CGPEB+xkZ-sGVDgigFwij5zFJ7bupYvQXWL8Zti9HKFlEiugOQ2GSSFATaz3Bvo8kT6EcCXDyRAYRbMxdrPHKAA6aEADS0IAAZoZAIAA5oQAHzQgATGhAAstCAB0aCaXdLAAFNADLAAqNCABBaC6X9LAAjtDdLBlgAEmhkAEytpfcEABg0E0sADi0MgEABo0FMs6WAB+aDaW7KNlgAKmhAAxNCTKZlgAUGhAAtNBHLRloy-pYADJoUZcgEAA40Jcu6WABIaEADY0EcooTTBZFAPUigotLZGLwsw+ChCAEaWQJRlTSzpf0omXdKOlgAGmgjlgANmh5lwKyOdROGr-ccx8i+CQiQ+hfQfoDAXUvQtSzKQYYQkUnPVUd4MBvoRwVJfCsaTor+lgAJmhulny9pcgAuXXKUVyAc5d0sADg0IAEBoVZUcvOVtKjlqy7pU0tWVtKpl-yl5UsqOUwwtluyz5d0suVHL0V3S6ZcgEABY0N0sACc0FMslX-KZlAzCNCCqN58jPpRK76SSt+l2KoCMBVUHgWmwuhjA9xb8NuE9QcVyQwRdDveKIIQSy4kYKMPOUAB0UIAHEoQAAxQia5AIADIoQANJQgADihAAJFCAA+KEABAUBmvzXIBs1gAVih81gAdChc1yAQAKhQyazNfcEACgUNmsAACUMWtzWABBKEACcUPmsACEUKWorXVra1Da9NWmr7WFqKEcYUFcSvBWkrS234G3gtTgCAAmYFjFs5Y185PNYAH4oZAIADYoQALJQyattcgGbV1r81gAJigM1XawABRQbawAGBQU6tnDOosUxyrF1JGxRCvHJ2EKCfqsJW4SvlRK4wpZCgHCF8IBEgieBYMgGu-Cj4t12JQADRQl6xNYABwoQADxQya5AN2r7X9q01l6wABBQ9andeWsTXFq61gAByh419arDcmp3V9rkAPawABJQMMVtR2uQCob81gAYihb1pawAFhQ+antV2oo3jrGNRa+1WXFfXpLUFhKz-mCrgker0cWoCcaCgrReYkwu4OQLqDQz3pAAQoAVhWsiQENAzjAEOAzmjKRGCCifEvqOVJyRYuMUmIzEOiXRRobKXMgBQZS8xRYssVWirFUSGxLYjsWnXJhZ1bq+dYppNq7gIAgAbUBAA4IBHU60CA6NZRATC7CdiaJPIcFt3QzylxGCn6Vm27RsYdWwnfjNpSExxA8AyAKsKDA7kiYxMfrcSIjCKBJbYto+VLbEKZKcl2SnJWyAKSFLkjZSEpcyFKVlLLQ9iCxQKB5FaLHF4oLkLkTFDa0hanVVkl1XJrnUKaCt45Toj0T6KBRkAgALLB2iApQAFxglMHosgA83BRAAaWDIBAAfmDtFvNKxZAAlEsjtFeiCUPbd0XaKHbkAJ2s7UKUm1TE9t06n+RAT9Z8g80cBVtNWnLTIFmK96BwH1G0rzBHkRBXAmWmhDMLMOGwaddPMXH1swtG2kjpAiRJxRzIgAZLBAAs2Ag75ysMAto6DUK47QteW91ZtsgS2RAA8mBMk6YgAULBzIgAarB2iO2j7fTFu2il2iA2-YoFCmLSkxtqxeUq0RRIExLImxLyDNra2g6sIsVPqHEXIBgBp0PLGjFCBczHA+oj5WlhCAGi5UEdyACslBpCK0Y2tyCpQfjv6Es7wtbO7NODsh14E+JDgaHdJTh0VhLMYalAhDrwKWjZwVyT8EKBQJcBcdE4VAG5TxyFpAA2ED-ZqIWoDjCaUz34l4KiHQAMCAyHSbAXtEieiEwBepADMAoS5hmd2SzBQuvHJ07p0DO03QnvHBJ7sSK5EAEXpuLhZlyq8mvTEI+mZLXV7uonYvJipIY+ok6O3THt138ADdRGDAOmQHAogfShZAgDDEg0zBw11GR3S+szAd75y2BBADMFwxF64ipgcAAWGNIxZfsu+vgEXsACYQAQHmCj5a9y2jJe+qyWfqcl36yBHXCbi1wT4tccXot1rh3xJ4gAGRB7gl8QAMIgZ8aAwvDHgTx7gnXQbl4iHgdxd40BwAHIgJ8eePvDe67x948B9JMgCiQ17J2wWZTaOhQDbN7kjyfAAGhFBlgUA1yQAKaAtBGLL8nObrhODFCIsHXr-0N6ItkCQAEgg28Cg3PF7jEHyEbOAsPOUACwgJZjHR2hrk9ANDEId+5vq0FY++vfluJ2NI3EniQXiEjCTeJfEQ8N7oPEiQ7wYYgAHBAaugAURBfEvcUeOEmHgwGP9NBxpO+gdRJgwYa6IBaVsEyd5RM4mKgl8iKCgxODo+YQ1-pk3nsDDohow5PpOTzN+DjeJyuVr2YsHXke4OCshEKNydTmfyRlECl1BXM2cuAecvjkBiNokYNxODnCBUicUoyXAFSGOngCIh4KvUHUaCURB6TiMKoIjCgHsrKQhD8wEQw6XSOaCTk5mwFIUb2x2hJJfAIQnGHYW1HbN-CVAGWyZC4teoeAO0dMdmN4yxDnuk5BSxqzCd4glWj1FBQrEfRlDfrGI7hCbE7Had7IQGKYEbR4SSywobAigGyKloZs1GBg31E+g5Fxj7ITCs0ZKK1GZjSRnLQTvH0LyFj-CIA43Frgdwe4-cWQ4AA0QIeNPEACaIL3HuBXwO4lBneKAYvhXx94pJ++LXCEPVhawuxyiGcjWZXJbkTBwQPs1eSyhjmTxvg5UcubqEUWlYIcPgAUEEqUja2wnRibuH8I8EDJkA6Qje6PxajbJusPOThZMoEW7KbU9KabDnH55xHDI-wlMMgHzDwvKk-3AiTIBp49cZuDDEADQILrw8MgHkkXh5kwkZ1McnbU+4oBdS2DTjGfUyAN04y3LaepmWoKf0yaYUGWTv9+hhU+iYtOYnKIpGe4ve3mAllostLZ4vFiEXSgcz1GGJXxyEDuB20tRucdmRRAoCtm3hUEvmSeYZAewKGe1GCbuRcTzQYA9kBuRcxCH9Feh2TYGMMOs7jDN2JrBJHuJ1g2sQhus3iL+zGAbRq8-eZRCwAjmR9P+1I3McnOWmuoWVMJRlnX1xEYAqRCs3Er+z5tAc9ARE5KaXO3NhOs7IQqJLkCYUayCAjCquYEmdnOwNZc0IJkyAJHtzUc51aPrTMTmPdU5-hIADjoQAJXQgAWehkAgACuhAAxdBIXAAVdCAAG6CQuABU6EADN0ChcACt0DhZIuABx6EACN0ARcAD90FRcADT0IADroJC-cFQuAA+6EACZ0AReIvIAmL+F2i4ABboJC4ACzoUS7RcAD10IAEHoQAPnQyF5AIAEjobi0RcAAT0MgBIvsXhLgAEugkLWlqSwJaosUXkLFCTsPOUAAUMIAD4YZAIAA4YQALIwZlwAOIwgAThhAA-DCAASGEACCMIACYYMyx5Zsu2XAArDAWXAA6DBuXAAQDD3BAAdDAOWwryASKy5ciu2XIrXl+yy5ZsthW3LgAaRhAA7DBhXgrVlwAFQwXlwAKgwgABhgXLYVwAFgwFlsK6PkgBmn+aO-ZU5REACd0IACboBi4pbav4WWLJltnuOScteXMryAAK6VZSuABCGFssmW48O51M+ObSMHnMzOULC7RcIsUWRLeFxS8pcIv6WCLUl5AHBawvYWZLtF9SxRbatqWRLgAMegJLul-a-hcABT0JhZOs4XdrBlvSzDA4ssXkAWlq6zhdouoW7ryAR68RcItnXnrUlli3Vf6uQJAANDC2WvLDlwADgwpV2y3FcAACMMgGKuAApGFKvFW-LgAeBgArLlwAOQweVwq2ZZcuVWHLdlzy2FcABkMC5ZhjRXIrflty4ADEYLyx5esseXirmVoKz5bSt83SrvNjy2FcAD4MB5bMv2WLLrNuqzNfAsrbIL81-czBcPM5RAARHCAAWOEACYcIABQ4QAKxwgAVDhAAknCABaOB1uABiOEACMcIACw4QAAJwgAPDhAA7HCAAJOAtuAAgODNuABwOEACQcNbZ1v23LbgAJjhAA6HDW3AAgHCh3g7GtwACBwgADjhAAyHBm2Nbrt4O97cACEcAbdjuAByOGDsZ3AAVHDx2PbJl8UPOVHbGAgwFAKMDFgPAmWxww4Bq+oPsm-9AA1HA53rbetw24ACg4YOzncABCcIAFI4CO6XfnJRhCAcICSOAu+SmLBmo4QcI3dHPymVbFx+Y81Zyi23B7wdwANBwZty24ABk4UO4AFk4dO8HZ1uABhOFbsm2E7id+24AGw4QAOJwOtjW9be9uAAROG9u22Tb6d5AEHeDsp3g7Edy24AE44E22zl7DzkEQnmW3XABoCdhbs4CmgMgAPBgbTsQgLzHMCjAwx0HSGCspPbtCIPCAdoOqw3ZlPziUzY5mCY1dXGhjKIgADY-AApx+AA9j8AC-H8gEADbHww8AD7H+w8AArH4ADWP+u4OEnDTh5y+xu5J2DuRHU-iiWasvAuFC6SQyKGIQK2NbSABuoBb3IA1HcjvQt0fdKSP7koJCAEMfNCfQTLw+i4ZQ7nnUOW7f0rh4AF2PwAJcfyAQAGcfgAdY+XHgABY-2HQjicFOFiDzk3SkeFANCGhBugQ6Dmcx03fjkAHGkjjzx4ACWP5AFw88eAAjj8ADHH54-4fuPUnyAfhww8ceABFj-seABVj44fcOYYJT+x4AC2PrhwU9cduPUn9jlx4AD+P8B2OBEcBPsSaj2GN+JUCWYUAjaRtFo4IlALpsajyzDDB6fSAAAX3oSOqRg+osgLR80bUefGUWO0FE67tjkLW1bS1icgf1UgjRQA94uIHHrwBQBAAjICGtJJ351QqOBUhhkIY-vCABpBGgoASjIKHAJc8TIFhdwJl2PiciQlMpPUxkoVtNkSK-igBKIQgC5klHwL4KehLo2McBZdGTLgWJeyoKofN3T5f03IlAGPGepcgFOU-gC-nLvpcwLmakNC93HwV0X0Tr9Y3oorCdh8e7YAE2j3ahosAlz5GCAO+f+8fn0wd2gYVecSSCAvzigLuDquAua5+RIokALiLGSJjMoEDeeUmNaTpQP4GF-u2RfwnIAdVjF9JtRNu7oLE+-Z4AGwQHeAkn3ggG54tcbeF6dQOAB1EBcPtxG4iB3rvvHQMOmsDI3XeAQf3i9c2ugAFRBx4NJ7eBQmXDzk9ilkQAEtgzmnooFEABdYMKWWgeQeibkJaOTH2KWQpiKbgKIAEGwQYiMVWIJR43YxW7cKT22k7hSBb7ovG4Ld5vI3+K41zs9Vtmv17WEQAPggRBoN6vDK64nI3uhvETW5cgqkMSbOVcAy--1MvGkgAehAzDQSCw4QaHiAAxEDwPBu7D4bpw-3DcOABxEHSQgHUkJJ3uKPijcdbqYmQumPsQSjIA2SNkcYpW-2LxvVoXkeNyKTig5vftBb5aAW-jcswi3yALkn0XMjLQWSHkOtw27zfIBAAK2CTvI5yZ5I1i+sc4vclJtcULRT6jzBAA13gBlFggAQrxsMiwAABf4hAA53hEYAAL7KE8wzOAyYAajxJGiISRAA3Xj4gMPfUQAIiAj6FMoR4oTrhk9DzH1Q4D3Z+hx09AfimyEcqhr0dEawglhwoSbgsSs1qx8fJnfiGYqHHjsOKEAD9eEKGACABtvA3UosBPIlYAKpVrKyBoHZZH9DWRoyKfMg07y47BcohxEcAtFOTsAEADjeLxU8wXiQAXmXsHp5ACYe6tdH5Mgx-xIUBAAi3hEfgAOnmcWzlM94iBI06LRSmXM81LW0XpH9DVVRgbYrwaANL79F+h+hv04n6gIhVHxKfyHSH2eWp+c-q2sIgAQ2sAugAJ1VAA0OYedAAMP+ABEI0ADTKoAEhDQANf6gABnVAA8qqABMBUAAG8jdxRY7h5ygAImsAuXXwADdyfX1byN9G+AA71Mm+AAKgzm+DNTw54bLds4-XtulTa4nKIADQ5QADKue3wAL6ah3iNAt+xJ3fHvz3suMd4sBOe17V3rCIAGA9QAJNGgABXlAAQ-KAA9vMADEVoAC6Hab4AFPdQADrygAUDVAA+P-IABvgAZ4MqegAZQS2cr3vEcD5B+AB6M0ABBmoAFV5QAFxyCPxH4ABC3VH719W-Y+8fKLb789C2fWTf9F3jM529a9dfAAiAp9f+fW3qbwd7Zxs+8dnPvc6vcWudv3vT38X4eEwCS-VtK98001f+9E+yf5PuH0j-p+9f+fzPxX2eGV+KZmAIgNYNCAYAzAogtQFwBNR2AFp-wkENiRDDvBW+VQsIACFfnuSXAdQcESIIhGwDkBLwfeIQL2CvwABqSP8AGfCvA2A0Ef38QFhCwR4IN4JCOQHYDABIIbAG33YD-AcBLwRfvP9QDxBF-Lwd4FjDQFhgLlLwj5ZCHeFT8gA4-PycwM6Ud++BnwkEAwAAHoe-74CjBAFD+ts7wJf+wOwAgiXgger4S34pF0w0ZoQFBQ4LwDdLGBrgYwZ0DcBUAvBnAMWP0JWNcx3gZ-hgDNAv4gBL+ZxyEMAHeCwhvkWF-pbCfcCwgWikMDB8SGZlKV4gKlLmYwKuZwDiQsdRSETIgWGf3n9FgRf1mhrwegBv9JyXqAEhpgEaFohkACcn+I8wMr3nMdIUANP9wA8-0gCr-G-wmwoAFrDkBUALUGhAkAg5338ECOInQCDRZMld8KFOlSjwvoZX0kxTQQgD9B0YY-0T8wA6EBtR5AAv3YBy-XgNwDDgS8FkA7iI-0ghE-MfzoAwAXgDb8RsR3zkDYQRgB0AtAP+VH9bAUv2QAAAMl0D8wbQPsBQ-aiHD9xQOPxiAwQCEChAQ-V3wwxQ6d32sDHKRwBeAYgNgA98x-VQPUDtABPyQgpsfAE8wUIQwNt9LwUEmoBoAUfycAXgUqiB5rwV-zvAGAFwI7Ap-PqEcA0ghZ0hBoQZ8Bn9JAFUBgBkAO8GmwwAQIKwALAnwMkAGA930Uh7kZwG99PfP3yKCSgkwJUAI-ZAGj9Y-eP1yDJAHgIkZYQRoMlAsALPxEAp-CRkvBpsYwASCogjsHYA4QUyDhARAHIK6DfAkEEnFf-IoFhAEBCYJED+Au4h7AJGRYKWDKgj33yDagq-HyC-fTYNMBzsMP1aDo-GADKClg3IMT8JAgEADJnAS4KKB2AGABEBAIHP0eDc-IwPeA5AEQA2DCxK4K+Cfg4CD+ClgnQH+DygtgD0Alg2QPoB2AXqEyCIAEEOcAx-CYARDtAHQBn8DAADQiBVgy4FQB8cMnH4B7gVADoBgQWICeA7wUEmTB5AtAHJCmQ3wAM1aQhQJpDnKTv14A7wMkIpCGAAAB80AbkOOBnwXwF8BOgj5FXBQlQULGDD-O8Gd5AidUDj8kgtwMMDiMTLA4BlQ+dESAeQ7Pz+D8Q1YCggkIQf2H8hASv2r9a-LfztEYAOQC0CogOQOyCNAIAA

export function toResultSet(
    results: TranslationResults,
    toLocales: string[],
    translatableText: Map<string, string>): TranslationResultSet {

    const translatableKeys = [...translatableText.keys()];
    const resultSet: TranslationResultSet = {};
    if (results && results.length) {
        toLocales.forEach(locale => {
            let result = {};
            const matches = results.filter(r => r.translations.some(t => t.to === locale));
            if (matches) {
                for (let i = 0; i < matches.length; ++ i) {
                    const translations = matches[i].translations.map(t => t['text']);
                    const zipped = zip(translatableKeys, translations);
                    for (let f = 0; f < zipped.length; ++ f) {
                        const key: string = zipped[f][0];
                        result[key] = zipped[f][1];
                    }
                    resultSet[locale] = result;
                }
            }
        });
    }

    return resultSet;
}